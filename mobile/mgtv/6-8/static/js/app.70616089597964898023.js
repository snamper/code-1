webpackJsonp([1],{NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("MVMM"),i=e("aozt"),s=e.n(i),a=e("I3h8"),r={name:"App",methods:{initSmcp:function(){var t=this;initSMCaptcha({organization:"UPLdPizkPMmRZklBqqit",appId:"tyhd",appendTo:"code-box",onError:function(t,n){console.log(n)}},function(n){n.onSuccess(function(n){n.pass&&(t.rid=n.rid,t.sendCode())}),n.onError(function(t,n){console.log("onError , errType, errMsg")})}),this.showCode=!0},openBtn:function(){this.tipMsg="",this.phone.length>0&&!this.snedWait?(this.btnOn=!0,this.code.length>0&&(this.submitBtn=!0)):(this.btnOn=!1,this.submitBtn=!1)},openSubmit:function(){this.tipMsg="",this.phone.length>0&&this.code.length>0?this.submitBtn=!0:this.submitBtn=!1},checkPhone:function(){/^[1][3,4,5,7,8][0-9]{9}$/.test(this.phone)?(this.btnOn=!1,this.queryPhone()):(this.tipMsg="请输入正确的手机号！",this.btnOn=!1,this.submitBtn=!1)},queryPhone:function(){var t=this;s.a.get("/share/user/h5/register.do",{params:{telNum:this.phone,type:"1"}}).then(function(n){t.codeOn(n.data)}).catch(function(t){alert(t)})},codeOn:function(t){"成功"==t.message?(this.tipMsg="",this.btnOn=!0,this.popInfo=!0,this.initSmcp()):(this.tipMsg=t.message,"1006"==t.code&&(this.popInfo=!1,this.pop=!0),this.btnOn=!1,this.submitBtn=!1)},sendCode:function(){this.showCode=!1;var t=this;s.a.get("/tyuehd/user/phonecode.do",{params:{phoenNum:t.phone}}).then(function(n){"成功"==n.data.message?t.indexNum():(t.tipMsg=n.data.message,t.btnOn=!1)}).catch(function(t){alert(t)})},indexNum:function(){this.btnOn=!1,this.tipMsg="";var t=59;this.snedWait=!0;var n=this,e=setInterval(function(){if(n.codeText=t+" S",--t<1)return n.timeInterval(e)},1e3)},timeInterval:function(t){clearInterval(t),this.btnOn=!0,this.snedWait=!1,this.codeText="获取验证码"},submitRegister:function(){var t=this;if(!t.queryString("spreadType")||!t.queryString("spreadId"))return a.a.alert({title:"提示",message:"渠道参数有误！"}).then(function(){});s.a.get("/share/user/h5/register.do",{params:{telNum:this.phone,vildCode:this.code,type:"2",spreadType:t.queryString("spreadType"),spreadChannel:"4",spreadId:t.queryString("spreadId"),rid:this.rid,productId:"169"}}).then(function(n){"成功"==n.data.message?t.pop=!0:t.tipMsg=n.data.message}).catch(function(t){alert(t)})},goDownload:function(){var t=navigator.userAgent,n=(navigator.appVersion,t.indexOf("Android")>-1||t.indexOf("Linux"),!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/));window.location.href=n?"https://itunes.apple.com/cn/app/id1286643034 ":"http://a.app.qq.com/o/simple.jsp?pkgname=com.tyhd.jifen"},queryString:function(t){var n=location.search.match(new RegExp("[?&]"+t+"=([^&]+)","i"));return null==n||n.length<1?"":n[1]}},data:function(){return{showCode:!1,tipMsg:"",phone:"",code:"",btnOn:!0,pop:!1,submitBtn:!0,codeText:"获取验证码",snedWait:!1,rid:"",popInfo:!0}}},c={render:function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{attrs:{id:"app"}},[o("img",{staticClass:"topImg",attrs:{src:e("hSo9"),alt:""}}),t._v(" "),o("div",{staticClass:"from-group"},[o("div",{staticClass:"inline-form inline-form_first"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"username",attrs:{type:"text",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:t.phone},on:{input:[function(n){n.target.composing||(t.phone=n.target.value)},t.openBtn]}})]),t._v(" "),o("div",{staticClass:"inline-form inline-form_second"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"code left",attrs:{type:"number",placeholder:"短信验证码"},domProps:{value:t.code},on:{input:[function(n){n.target.composing||(t.code=n.target.value)},t.openSubmit]}}),t._v(" "),o("button",{staticClass:"code-btn left",class:t.btnOn?"code-btn-on":"code-btn-off",attrs:{disabled:!t.btnOn&&"disabled"},on:{click:t.checkPhone}},[t._v(t._s(t.codeText))]),t._v(" "),o("div",{staticClass:"clear"})]),t._v(" "),o("button",{staticClass:"submit-btn submit-btn-on",attrs:{disabled:!t.submitBtn&&"disabled"},on:{click:t.submitRegister}},[t._v("立即注册领取")]),t._v(" "),o("div",{staticClass:"tip-msg"},[t._v(t._s(t.popInfo?t.tipMsg:""))])]),t._v(" "),o("img",{staticClass:"footimg",attrs:{src:e("ozy0"),alt:""}}),t._v(" "),o("van-popup",{staticClass:"popWrap",model:{value:t.pop,callback:function(n){t.pop=n},expression:"pop"}},[o("p",{staticClass:"popTitle"},[t._v(t._s(t.popInfo?"恭喜你":"温馨提示"))]),t._v(" "),o("div",{staticClass:"popContent"},[t._v("\n      "+t._s(t.popInfo?"领取优惠卷成功!":t.tipMsg)+"\n    ")]),t._v(" "),o("div",{staticClass:"popBtn"},[o("button",{on:{click:t.goDownload}},[t._v("立即下载")]),t._v(" "),o("img",{attrs:{src:e("aHOS"),alt:""}})]),t._v(" "),o("p",{staticClass:"popDes"},[t._v("\n      下载“赚动”app登录个人中心查看\n    ")])]),t._v(" "),o("van-popup",{staticClass:"code_box",attrs:{id:"code-box"},model:{value:t.showCode,callback:function(n){t.showCode=n},expression:"showCode"}})],1)},staticRenderFns:[]};var u=e("Z0/y")(r,c,!1,function(t){e("YBKZ")},null,null).exports;e("VHke");o.a.config.productionTip=!1,o.a.use(a.b),e("qqDS"),new o.a({el:"#app",components:{App:u},template:"<App/>"})},VHke:function(t,n){},YBKZ:function(t,n){},aHOS:function(t,n,e){t.exports=e.p+"static/img/download.b1cbd66.png"},hSo9:function(t,n,e){t.exports=e.p+"static/img/top.6645e17.jpg"},ozy0:function(t,n,e){t.exports=e.p+"static/img/foot1.8d6bb91.png"},qqDS:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("2LoE"),s=e.n(i),a=e("hRKE"),r=e.n(a),c=e("Yyxk"),u=e.n(c);!function t(n,e,i){function s(r,c){if(!e[r]){if(!n[r]){if(!c&&("function"==typeof o&&o))return o(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var p=e[r]={exports:{}};n[r][0].call(p.exports,function(t){return s(n[r][1][t]||t)},p,p.exports,t,n,e,i)}return e[r].exports}for(var a="function"==typeof o&&o,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,n,e){n.exports={domain:["captcha.fengkongcloud.com"],register:"/ca/v1/register",check:"/ca/v1/fverify",conf:"/ca/v1/conf"}},{}],2:[function(t,n,e){var o={NETWORK_ERROR:{code:2001,message:"资源异常"},SERVER_ERROR:{code:2002,message:"服务器异常"},PARAMS_ERROR:{code:2003,message:"参数异常"},NET_TIMEOUT:{code:2005,message:"网络超时"}};n.exports=function(t,n,e){var i=o[t],s=i.message+": "+e.message;i.message=s,n&&"function"==typeof n.onError?n.onError(t,i):window.console&&console.log(t,i)}},{}],3:[function(t,n,e){var o="function"==typeof u.a&&"symbol"==r()(s.a)?function(t){return void 0===t?"undefined":r()(t)}:function(t){return t&&"function"==typeof u.a&&t.constructor===u.a&&t!==u.a.prototype?"symbol":void 0===t?"undefined":r()(t)},i=t("./_object.js"),a={isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return"object"===(void 0===t?"undefined":o(t))&&null!==t},isFunction:function(t){return"function"==typeof t},IsPC:function(){for(var t=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],e=!0,o=0;o<n.length;o++)if(t.indexOf(n[o])>0){e=!1;break}return e},normalizeDomain:function(t){return t.replace(/^https?:\/\/|\/$/g,"")},normalizePath:function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t},normalizeQuery:function(t){var n=this;if(!t)return"";var e="?";return new i(t)._each(function(t,o){(n.isString(o)||n.isNumber(o)||n.isBoolean(o))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(o)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")},makeURL:function(t,n,e,o){var i=this;n=i.normalizeDomain(n);var s=i.normalizePath(e)+i.normalizeQuery(o);return n&&(s=t+n+s),s},hasSvg:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}};n.exports=a},{"./_object.js":5}],4:[function(t,n,e){var o=t("./_functions.js"),i=function(t){this._config={timeout:t||6e3,timer:null}};i.prototype={random:function(){return parseInt(1e4*Math.random())+(new Date).valueOf()},loadCss:function(t,n){var e={status:!1,type:""},o=this,i=this._config.timeout,s=setTimeout(function(){for(var o=document.styleSheets.length,i=0;i<o;i++)(document.styleSheets[i]&&document.styleSheets[i].href||"").indexOf(t)>-1&&(e.status=!1,n(e))},1e3),a=document.createElement("link");a.rel="stylesheet",o.timeOutFun(i,function(t){t&&(a.onerror=null,a.onload=a.onreadystatechange=null,e.status=!0,e.type="NET_TIMEOUT",n(e))}),a.onerror=function(){window.clearTimeout(s),window.clearTimeout(o._config.timer),e.status=!0,e.type="NETWORK_ERROR",n(e)},a.onload=a.onreadystatechange=function(){this.status||a.readyState&&"loaded"!==a.readyState&&"compvare"!==a.readyState||(window.clearTimeout(o._config.timer),window.clearTimeout(s),setTimeout(function(){n(e)},0))},a.href=t,function(){var t=document.getElementsByTagName("head")[0]||document.documentElement;t?setTimeout(function(){t.insertBefore(a,t.firstChild)},0):setTimeout(arguments.callee,10)}()},loadScript:function(t,n,e){var o={status:!1,type:""},i=this,s=i._config.timeout,a=document.createElement("script");a.charset="UTF-8",a.async=!0,i.timeOutFun(s,function(t){t&&"loaded"!==i._config.status&&(a.onerror=null,a.onload=a.onreadystatechange=null,o.status=!0,o.type="NET_TIMEOUT",window[e]=function(){return!1},n(o))}),a.onerror=function(){window.clearTimeout(i._config.timer),o.status=!0,o.type="NETWORK_ERROR",n(o)},i._config.status="load",a.onload=a.onreadystatechange=function(){this.status||a.readyState&&"loaded"!==a.readyState&&"compvare"!==a.readyState||(window.clearTimeout(i._config.timer),setTimeout(function(){n(o)},0))},a.src=t,function(){var t=document.getElementsByTagName("head")[0]||document.documentElement;t?setTimeout(function(){t.insertBefore(a,t.firstChild)},0):setTimeout(arguments.callee,10)}()},load:function(t,n,e,i,s,a){var r=this,c="load"+t;!function t(u){var p=o.makeURL(i,n[u],e,s);r[c](p,function(e){e.status?u>=n.length-1?a(e):t(u+1):a(e)},s.callback)}(0)},timeOutFun:function(t,n){var e=this;e._config.timer&&window.clearTimeout(e._config.timer),e._config.timer=setTimeout(function(){n(!0)},t)},jsonp:function(t,n,e,o,i){var s="smcb_"+this.random();o.callback=s,window.smCB=window[s]=function(t){i({status:!1,type:""},t||{}),window[s]=void 0;try{delete window[s]}catch(t){}},this.load("Script",t,n,e,o,function(t){t.status&&(window.smCB=window[s]=function(){return!1},i(t,{}))})}},n.exports=i},{"./_functions.js":3}],5:[function(t,n,e){var o=function(t){this._obj=t};o.prototype={_each:function(t){var n=this._obj;for(var e in n)n.hasOwnProperty(e)&&t(e,n[e]);return this}},n.exports=o},{}],6:[function(t,n,e){function o(t){this.smConfApi=c.domain,this.protocol=window.location.protocol.match(/http/)?window.location.protocol+"//":"https://",this.sourcePath=c.conf,this.onError=function(){},this._extend(t)}var i=t("../pkg/_load.js"),s=t("../pkg/_error.js"),a=t("../pkg/_object.js"),r=t("../pkg/_functions.js"),c=t("../pkg/_config.js");o.prototype={_extend:function(t){var n=this;new a(t)._each(function(t,e){n[t]=e})}},window.initSMCaptcha=function(t,n){var e=new o(t),a={organization:e.organization,appId:e.appId,rversion:e.version},c=function(t){var n=t.organization,e=t.appId,o=t.appendTo,i={status:!1,message:""};return n&&r.isString(n)?e&&r.isString(e)?o&&r.isString(o)&&document.getElementById(o)?i:(i.status=!0,i.message="请确保选择器(appendTo)为包框id",i):(i.status=!0,i.message="请确保应用标识(appId)为字符串类型",i):(i.status=!0,i.message="请确保公司标识(organization)配置无误, 如有问题向数美确认",i)}(e);c.status?s("PARAMS_ERROR",e,{message:c.message}):(e.https&&(e.protocol="https://"),(new i).jsonp(e.smConfApi,e.sourcePath,e.protocol,a,function(t,o){if(t.status)s(t.type,e,{message:"服务端无响应"});else{var a=o.code,c=o.message,u=o.detail||{};if(a&&1100===a){var p=u.js,d=u.domains,l=u.css;if(!r.isString(p)||!r.isString(l)||!r.isObject(d)||!d.length||d.length<1)return void s("SERVER_ERROR",e,{message:c});(new i).load("Script",d,p,e.protocol,{},function(t){t.status?s(t.type,e,{message:"JS SDK资源加载失败"}):(e._extend({css:l,domains:d}),n(new window.SMCaptcha(e)));var o=0;setTimeout(function(){var t=document.getElementById("SMCaptcha-captcha-root");o=t?t.clientWidth:0},100),window.onresize=function(){var t=document.getElementById("SMCaptcha-captcha-root"),i=t?t.clientWidth:0;i!=o&&(n(new window.SMCaptcha(e)),o=i)}})}else s("SERVER_ERROR",e,{message:c})}}))}},{"../pkg/_config.js":1,"../pkg/_error.js":2,"../pkg/_functions.js":3,"../pkg/_load.js":4,"../pkg/_object.js":5}]},{},[6])}},["NHnr"]);
//# sourceMappingURL=app.70616089597964898023.js.map