webpackJsonp([18],{383:function(e,t,r){"use strict";function a(e){switch(e.arrayFormat){case"index":return function(t,r,a){return null===r?[o(t,e),"[",a,"]"].join(""):[o(t,e),"[",o(a,e),"]=",o(r,e)].join("")};case"bracket":return function(t,r){return null===r?o(t,e):[o(t,e),"[]=",o(r,e)].join("")};default:return function(t,r){return null===r?o(t,e):[o(t,e),"=",o(r,e)].join("")}}}function n(e){var t;switch(e.arrayFormat){case"index":return function(e,r,a){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(a[e]=r);void 0===a[e]&&(a[e]={}),a[e][t[1]]=r};case"bracket":return function(e,r,a){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===a[e]?void(a[e]=[r]):void(a[e]=[].concat(a[e],r)):void(a[e]=r)};default:return function(e,t,r){if(void 0===r[e])return void(r[e]=t);r[e]=[].concat(r[e],t)}}}function o(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var i=r(399),u=r(65);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=u({arrayFormat:"none"},t);var r=n(t),a=Object.create(null);return"string"!=typeof e?a:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),r(decodeURIComponent(n),o,a)}),Object.keys(a).sort().reduce(function(e,t){var r=a[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=c(r):e[t]=r,e},Object.create(null))):a},t.stringify=function(e,t){t=u({encode:!0,strict:!0,arrayFormat:"none"},t);var r=a(t);return e?Object.keys(e).sort().map(function(a){var n=e[a];if(void 0===n)return"";if(null===n)return o(a,t);if(Array.isArray(n)){var c=[];return n.slice().forEach(function(e){void 0!==e&&c.push(r(a,e,c.length))}),c.join("&")}return o(a,t)+"="+o(n,t)}).filter(function(e){return e.length>0}).join("&"):""}},399:function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},643:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return u});var a=r(15),n=r.n(a),o=r(383),c=r.n(o),i=["/platform/merchantAccount","/platform/merchantChannelManager","/platform/supplierManager","/platform/memberManage","/platform/platemGoodsManager","/platform/platemAddGoods","/platform/platemGoodsHouse","/platform/checkPendingGoods","/platform/goodsRecycle","/merchant/goodsPackMan","/platform/platemOrderManage","/platform/platemStoreManage","/platform/platemCateManage","/platform/goodsAudit"],u=function(e,t,r){t.listen(function(t){var a,o=c.a.parse(t.search);if(a=o.pageNo&&o.pageSize?c.a.parse(t.search):n()({},o,{pageNo:1,pageSize:10}),t.pathname===r)return e({type:"query",payload:a})})}},769:function(e,t,r){"use strict";function a(e){return Object(U.a)({url:L,method:"get",data:e})}function n(e){return Object(U.a)({url:k,method:"post",data:e})}function o(e){return Object(M.a)({url:I,method:"post",data:e})}function c(e){return Object(U.a)({url:O,method:"post",data:e})}function i(e){return Object(M.a)({url:A,method:"post",data:e})}function u(e){return Object(M.a)({url:C,method:"post",data:e})}function s(e){return Object(M.a)({url:G,method:"post",data:e})}function d(e){return Object(M.a)({url:P,method:"post",data:e})}function l(e){return Object(U.a)({url:N,method:"get",data:e})}function p(e){return Object(U.a)({url:E,method:"post",data:e})}function f(e){return Object(U.a)({url:q,method:"post",data:e})}function m(e){return Object(U.a)({url:_,method:"post",data:e})}function g(e){return Object(U.a)({url:F,method:"post",data:e})}function h(e){return Object(U.a)({url:R,method:"post",data:e})}function y(e){return Object(U.a)({url:w,method:"get",data:e})}function b(e){return Object(U.a)({url:S,method:"get",data:e})}function v(e){return Object(U.a)({url:$,method:"post",data:e})}function x(e){return Object(U.a)({url:z,method:"post",data:e})}function D(e){return Object(U.a)({url:B,method:"post",data:e})}t.o=a,t.e=n,t.s=o,t.h=c,t.c=i,t.b=u,t.a=s,t.k=d,t.m=l,t.l=p,t.p=f,t.f=m,t.q=g,t.d=h,t.i=y,t.g=b,t.j=v,t.r=x,t.n=D;var U=r(183),j=r(25),M=(r.n(j),r(189)),L=j.api.goodsList,I=j.api.saveCateMessage,O=j.api.cateManagerList,w=j.api.chooseGoodsList,S=j.api.exportGoodsList,k=j.api.goodscatelist,A=j.api.productBatchClassify,C=j.api.addProduct,P=j.api.getMerchant,N=j.api.productDetail,G=j.api.updategoods,E=j.api.auditProduct,q=j.api.onlineUrl,_=j.api.deleteUrl,F=j.api.queryAllOnLineUrl,R=j.api.batchOnLineUrl,$=j.api.getChooseGoodsOutLineUrl,z=j.api.queryOutBatchLineUrl,B=j.api.setExchange},916:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(72),n=r.n(a),o=r(68),c=(r.n(o),r(69)),i=r.n(c),u=r(15),s=r.n(u),d=r(769),l=r(383),p=r.n(l),f=r(643);t.default={namespace:"addGoodsModel",state:{dataSource:[],merchantList:[],chooseCateId:"",isUpdate:!1,ifShowDetail:!1,step:1,productType:1,listImgUrl:{},mainImgUrl:{},imgList:[],fileList:[],loading:!1,goodsDetail:"",goodsId:"",currentProduct:"",productMerchant:"1",exchangeMessage:{productAdAttr:"1",exchangeMethods:"1"},extendedDetail:{}},subscriptions:{setup:function(e){var t=e.dispatch;e.history.listen(function(e){if(e.pathname===f.b[5]){var r=p.a.parse(e.search)||{pageNo:1,pageSize:10};console.log(r.id),t(r.id?{type:"queryDetail",payload:r}:{type:"query",payload:r})}})}},reducers:{getList:function(e,t){return s()({},e,{dataSource:t.dataSource?t.dataSource:[],step:1,listImgUrl:{},mainImgUrl:{},imgList:[],goodsDetail:"",currentProduct:"",productMerchant:"1",exchangeMessage:{productAdAttr:"1",exchangeMethods:"1"},extendedDetail:{},isUpdate:!1,ifShowDetail:!1})},merchantList:function(e,t){return s()({},e,{merchantList:t.merchantList?t.merchantList:[]})},getGoodsDetail:function(e,t){return console.log(t.mainImgUrl),s()({},e,{currentProduct:t.currentProduct||"",exchangeMessage:t.currentProduct.product_detail,extendedDetail:t.productExtendedDetail||{},goodsId:t.id,step:2,isUpdate:!(!t.source||"1"!==t.source),ifShowDetail:!(!t.source||"2"!==t.source),listImgUrl:t.listImgUrl?t.listImgUrl:{},mainImgUrl:t.mainImgUrl?t.mainImgUrl:{},imgList:t.imgList?t.imgList:[],goodsDetail:t.currentProduct.product_detail.product_describe,productMerchant:"10000"===String(t.currentProduct.product_detail.channel_type)?"1":"2",fileList:t.fileList||[]})},chooseCateId:function(e,t){return s()({},e,{chooseCateId:t.chooseCateId})},productMerchant:function(e,t){return s()({},e,{productMerchant:t.value})},nextStep:function(e){return s()({},e,{step:2})},listImgUpload:function(e,t){return s()({},e,{loading:t.payload.loading,listImgUrl:t.payload||{}})},mainImgUpload:function(e,t){return s()({},e,{loading:t.payload.loading,mainImgUrl:t.payload||{}})},detailImgUpload:function(e,t){return console.log(t),s()({},e,{loading:t.payload.loading,imgList:t.payload.imgList||[],fileList:t.payload.imgDetailList||[]})},preview:function(e,t){return s()({},e,{previewImage:t.previewImage,previewVisible:t.previewVisible})},changeGoodsDetail:function(e,t){return s()({},e,{goodsDetail:t.value})},changeData:function(e,t){return s()({},e,{exchangeMessage:t.exchangeMessage})},changeStep:function(e,t){return s()({},e,{step:1})}},effects:{query:n.a.mark(function e(t,r){var a,o,c,u,s,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=void 0===a?{}:a,c=r.put,u=r.call,e.next=4,u(d.e,o);case 4:if(s=e.sent,!s.success){e.next=11;break}return l=s.data,e.next=9,c({type:"getList",dataSource:l,id:o.id||"",source:o.source||""});case 9:e.next=12;break;case 11:i.a.error(s.message);case 12:case"end":return e.stop()}},e,this)}),queryDetail:n.a.mark(function e(t,r){var a,o,c,u,s,l,p,f,m,g,h,y,b,v;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=void 0===a?{}:a,c=r.put,u=r.call,e.next=4,u(d.m,{productId:o.id});case 4:if(s=e.sent,!s.success){e.next=17;break}for(console.log(s.data),f=[],m=[],g=0;g<s.data.img.length;g++)h=s.data.img[g],console.log(h.type),h.imgUrl=h.image_url,"1"===String(h.type)?l=h:"2"===String(h.type)?p=h:(f.push(h),m.push({uid:h.imgUrl,url:h.imgUrl}));if(y=[],s.data.productExtendedDetail&&s.data.productExtendedDetail.length>0){for(b=0;b<s.data.productExtendedDetail.length;b++)v=s.data.productExtendedDetail[b],"announcements"===v.attrDicName?y.announcements=v.detailDesc:"statement"===v.attrDicName?y.statement=v.detailDesc:"useFlow"===v.attrDicName?y.useFlow=v.detailDesc:"usefulTime"===v.attrDicName?y.usefulTime=v.detailDesc:"purchaseSucceedsMsg"===v.attrDicName?y.purchaseSucceedsMsg=v.detailDesc:"purchaseSucceedsMsg"===v.attrDicName?y.purchaseSucceedsMsg=v.detailDesc:"purchaseSucceedsMsg"===v.attrDicName&&(y.purchaseSucceedsMsg=v.detailDesc);console.log(y)}return console.log(l),e.next=15,c({type:"getGoodsDetail",currentProduct:s.data,productExtendedDetail:y,source:o.source,listImgUrl:l,mainImgUrl:p,imgList:f,id:o.id,fileList:m});case 15:e.next=18;break;case 17:i.a.error(s.message);case 18:case"end":return e.stop()}},e,this)}),queryMerchantList:n.a.mark(function e(t,r){var a,o,c,u,s,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,o=void 0===a?{}:a,c=r.put,u=r.call,e.next=4,u(d.k);case 4:if(s=e.sent,!s.success){e.next=11;break}return l=s.data,e.next=9,c({type:"merchantList",merchantList:l});case 9:e.next=12;break;case 11:i.a.error(s.message);case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}},e,this)}),saveMessage:n.a.mark(function e(t,r){var a,o,c,i,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,o=r.put,c=r.call,i=r.select,e.next=4,c(d.b,a);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}},e,this)}),UpdateMessage:n.a.mark(function e(t,r){var a,o,c,i,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,o=r.put,c=r.call,i=r.select,e.next=4,c(d.a,a);case 4:return u=e.sent,e.abrupt("return",u);case 6:case"end":return e.stop()}},e,this)}),setExchange:n.a.mark(function e(t,r){var a,o,c,i,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.productMessage,o=r.put,c=r.call,i=r.select,e.next=4,o({type:"app/noLoading",noLoading:!0});case 4:return e.next=6,c(d.n,a);case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}},e,this)})}}}});